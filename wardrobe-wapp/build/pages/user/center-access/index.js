"use strict";var app=getApp();Page({data:{wardrobeInfo:{},locksList:[]},getWardrobeList:function(){var e=this;app.wxRequest("/device/devices",{},function(t){var o=new Date;o.getTime();if(1==t.code){var a=t.data.list[0];e.setData({wardrobeInfo:a}),e.getWardrobeOrderLocks()}})},getWardrobeOrderLocks:function(){var e=this;app.wxRequest("/order/nowCanOpenLock",{did:e.data.wardrobeInfo.did},function(t){if(1==t.code){var o=t.data.locks;o.length>0?e.setData({locksList:o}):e.setData({locksList:null})}})},openLock:function(e){app.wxRequest("/relay/openLock",{lockId:e.currentTarget.dataset.id},function(e){1==e.code&&app.showToast("开柜成功","success")})},onShow:function(){this.getWardrobeList()},toCartOrder:function(){app.redirect("/pages/goods/reserve-settle/index?did="+this.data.wardrobeInfo.did,"navigateTo")},leave:function(){wx.showModal({title:"提 示",content:"您确定要离开吗？确认完后会立即开门",success:function(e){e.confirm&&app.wxRequest("/relay/closeDoor",{did:6},function(e){1==e.code&&app.showToast("开门成功","success")})}})}});