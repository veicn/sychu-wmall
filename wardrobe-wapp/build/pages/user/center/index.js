"use strict";var app=getApp();Page({data:{balance:0,freeze:0,score:0,score_sign_continuous:0,userInfo:{}},onShareAppMessage:function(e){return"menu"===e.from?app.onShareAppMessage({path:"/pages/index/index",title:app.getCookie("syc_appName")||"衣否",imgUrl:"/images/logo.jpg"}):"button"===e.from?app.onShareAppMessage({path:"/pages/index/index?inviteCode="+this.data.userInfo.inviteCode,title:app.getCookie("syc_appName")||"衣否",imgUrl:"/images/logo.jpg"}):void 0},scanCode:function(){wx.scanCode({onlyFromCamera:!0,success:function(e){e.result.indexOf("/relay/openDoor")>-1&&app.wxRequest(e.result,{},function(e){1==e.code?app.showToast("扫码开门成功"):app.showToast(e.message||"扫码开门失败")})}})},getUserInfo:function(){var e=this;app.wxRequest("/user/userCenter",{},function(a){e.setData({userInfo:a.data})})},onShow:function(){this.getUserInfo()},inviteFriends:function(){wx.showModal({content:"您的邀请码："+this.data.userInfo.inviteCode||"66666",showCancel:!1})},recharge:function(){app.redirect("/pages/user/recharge/index","navigateTo")}});