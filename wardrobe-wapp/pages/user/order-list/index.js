"use strict";var app=getApp();Page({data:{lastPage:0,currentPage:1,orderList:null},onReachBottom:function(){if(this.data.currentPage>=this.data.lastPage)return app.showToast("已经最后一页","none");this.orderList(++this.data.currentPage)},orderDetail:function(t){var a=t.currentTarget.dataset.id;app.redirect("/pages/user/order-details/index?id="+a,"navigateTo")},cancelOrderTap:function(t){var a=this,e=t.currentTarget.dataset.id;wx.showModal({title:"确定要取消该订单吗？",content:"",success:function(t){t.confirm&&(app.wxRequest("/order/cancelOrder",{oid:e},function(t){}),a.orderList(1))}})},toPayTap:function(t){var a=t.currentTarget.dataset.id;app.wxPay(a,"/pages/user/order-list/index")},orderList:function(t){var a=this;t=t||1,app.wxRequest("/order/userOrders",{page:t},function(t){1==t.code?a.setData({lastPage:t.data.lastPage,currentPage:t.data.currentPage,orderList:t.data.list}):a.setData({orderList:null})})},onLoad:function(){this.orderList(1)}});