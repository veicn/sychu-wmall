"use strict";var app=getApp();Page({data:{transactions:[],lastPage:0,currentPage:1},onShareAppMessage:null,onReachBottom:function(){if(this.data.currentPage>=this.data.lastPage)return app.showToast("已经最后一页","none");this.getUserTransactionsList(++this.data.currentPage)},getUserTransactionsList:function(a){var t=this,s={};s.page=a||1,app.wxRequest("/transactions/index",{type:2,page:s.page},function(a){var e=a.data;1==a.code?1==s.page?t.setData({transactions:e.list,lastPage:e.lastPage,currentPage:e.currentPage}):t.setData({transactions:t.data.transactions.concat(e.list),lastPage:e.lastPage,currentPage:e.currentPage}):(t.setData({transactions:[],lastPage:0,currentPage:1}),app.showToast(a.message||"获取交易失败"))})},onShow:function(){this.getUserTransactionsList(1)}});