"use strict";function _defineProperty(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var app=getApp();Page(_defineProperty({data:{indicatorDots:!0,autoplay:!0,interval:3e3,duration:1e3,loadingHidden:!1,swiperCurrent:0,banners:[],newlyGoods:[],hotGoods:[],bannerRedirect:!1,bannerURL:"https://mp.weixin.qq.com/"},onShareAppMessage:function(){return app.onShareAppMessage({path:"/pages/index/index",title:app.getCookie("syc_appName")||"衣否",imgUrl:"/images/logo.jpg"})},onShow:function(){this.setData({bannerRedirect:!1}),this.getBannerGoodsList(),this.getHotGoodsList(),this.getNewlyGoodsList()},getBannerGoodsList:function(){var e=this;app.wxRequest("/commodity/commodityBanners",{},function(t){1==t.code&&e.setData({banners:t.data.list})})},getNewlyGoodsList:function(){var e=this;app.wxRequest("/commodity/index",{newly:"1"},function(t){1==t.code&&e.setData({newlyGoods:t.data.list})})},getHotGoodsList:function(){var e=this;app.wxRequest("/commodity/index",{hot:"1"},function(t){1==t.code&&e.setData({hotGoods:t.data.list})})},addShopFavorite:function(e){var t=this,a=e.currentTarget.dataset.type,n=(e.currentTarget.dataset.index,e.currentTarget.dataset.id);app.wxRequest("/user/saveCollection",{cid:n},function(e){1==e.code&&("new"==a&&t.getNewlyGoodsList(),"hot"==a&&t.getHotGoodsList())})},removeShopFavorite:function(e){var t=this,a=e.currentTarget.dataset.type,n=(e.currentTarget.dataset.index,e.currentTarget.dataset.id);app.wxRequest("/user/cancelCollection",{cid:n},function(e){1==e.code&&("new"==a&&t.getNewlyGoodsList(),"hot"==a&&t.getHotGoodsList())})},swiperchange:function(e){this.setData({swiperCurrent:e.detail.current})},toDetailsTap:function(e){app.redirect("/pages/goods/details/index?id="+e.currentTarget.dataset.id,"navigateTo")},tapBanner:function(e){console.log(e),e.currentTarget.dataset.url?this.setData({bannerRedirect:!0,bannerURL:e.currentTarget.dataset.url}):e.currentTarget.dataset.id>0&&app.redirect("/pages/goods/details/index?id="+e.currentTarget.dataset.id,"navigateTo")}},"onShareAppMessage",function(){app.onShareAppMessage()}));