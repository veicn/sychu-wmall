"use strict";var app=getApp();Page({data:{indicatorDots:!0,autoplay:!0,interval:3e3,duration:1e3,loadingHidden:!1,swiperCurrent:0,banners:[],newlyGoods:[],hotGoods:[]},onShow:function(){this.getBannerGoodsList(),this.getHotGoodsList(),this.getNewlyGoodsList()},getBannerGoodsList:function(){var t=this;app.wxRequest("/commodity/commodityBanners",{},function(e){1==e.code&&t.setData({banners:e.data.list})})},getNewlyGoodsList:function(){var t=this;app.wxRequest("/commodity/index",{newly:"1"},function(e){1==e.code&&t.setData({newlyGoods:e.data.list})})},getHotGoodsList:function(){var t=this;app.wxRequest("/commodity/index",{hot:"1"},function(e){1==e.code&&t.setData({hotGoods:e.data.list})})},addShopFavorite:function(t){var e=this,a=t.currentTarget.dataset.type,o=(t.currentTarget.dataset.index,t.currentTarget.dataset.id);app.wxRequest("/user/saveCollection",{cid:o},function(t){1==t.code&&("new"==a&&e.getNewlyGoodsList(),"hot"==a&&e.getHotGoodsList())})},removeShopFavorite:function(t){var e=this,a=t.currentTarget.dataset.type,o=(t.currentTarget.dataset.index,t.currentTarget.dataset.id);app.wxRequest("/user/cancelCollection",{cid:o},function(t){1==t.code&&("new"==a&&e.getNewlyGoodsList(),"hot"==a&&e.getHotGoodsList())})},swiperchange:function(t){this.setData({swiperCurrent:t.detail.current})},toDetailsTap:function(t){app.redirect("/pages/goods/details/index?id="+t.currentTarget.dataset.id,"navigateTo")},tapBanner:function(t){0!=t.currentTarget.dataset.id&&app.redirect("/pages/goods/details/index?id="+t.currentTarget.dataset.id,"navigateTo")},onShareAppMessage:function(){app.onShareAppMessage()}});